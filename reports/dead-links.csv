# Dead Links Analysis - Markdown Link Validation
# Repository: menschlichkeit-oesterreich-development
# Branch: chore/repo-docs-issues-reorg
# Snapshot: 2025-10-17
# Method: Regex extraction + filesystem validation
# Scope: 517 Markdown files analyzed, 5,191 links extracted

# ========================================
# EXECUTIVE SUMMARY
# ========================================

# Total Markdown Files: 517
# Total Links Extracted: 5,191
# - External Links (http/https): 4,358 (84%)
# - Internal Links (file paths): 657 (13%)
# - Anchor Links (#section): 175 (3%)
# - Email Links (mailto:): 1 (<0.1%)

# BROKEN LINKS DETECTED: 520 (10% of all links)
# - Broken Internal Links: 520 (79% of internal links!)
# - Broken External Links: 0 (not validated - would require HTTP requests)
# - Broken Anchors: Unknown (not validated - would require parsing target files)

# CRITICAL FINDING:
# 79% of internal file links are BROKEN (520/657)
# - Primary cause: Repository reorganization (issue #469, #470)
# - Files moved from root → docs/archive/ or .github/instructions/
# - Links not updated after moves

# ========================================
# COLUMN SCHEMA
# ========================================
# source_file|link_text|link_url|link_type|status|recommendation|priority

# ========================================
# CATEGORY 1: BROKEN INTERNAL LINKS (520 links - P0-Critical)
# ========================================

.devcontainer/README.md|DEVCONTAINER-FIX-VISUAL.md|../DEVCONTAINER-FIX-VISUAL.md|internal|BROKEN|UPDATE_TO_DOCS_ARCHIVE|P0-Critical
.devcontainer/README.md|DEVCONTAINER-IMPROVEMENTS.md|../DEVCONTAINER-IMPROVEMENTS.md|internal|BROKEN|UPDATE_TO_DOCS_ARCHIVE|P0-Critical
.devcontainer/README.md|Codespace Status Checker|../..dokum/CODESPACE-STATUS-CHECKER.md|internal|BROKEN|TYPO_OR_MISSING_FILE|P0-Critical
.devcontainer/README.md|Troubleshooting|../..dokum/CODESPACE-TROUBLESHOOTING.md|internal|BROKEN|TYPO_OR_MISSING_FILE|P0-Critical

# Analysis (.devcontainer/README.md - 4 broken links):
# - DEVCONTAINER-FIX-VISUAL.md: Likely moved to docs/archive/ (check file-inventory-tracked.csv)
# - DEVCONTAINER-IMPROVEMENTS.md: Likely moved to docs/archive/
# - ../..dokum/ prefix: Typo? Should be ../../docs/ or ../docs/?
# - Recommendation: Search for actual files:
#   git ls-files | grep -i "DEVCONTAINER-FIX\|CODESPACE-STATUS\|CODESPACE-TROUBLESHOOTING"

.github/INDEX.md|Instructions Index|instructions/INDEX.md|internal|BROKEN|FILE_NOT_CREATED_YET|P1-High
.github/INDEX.md|Chatmodes Index|chatmodes/INDEX.md|internal|BROKEN|FILE_NOT_CREATED_YET|P1-High
.github/INDEX.md|Migration Guide|prompts/MIGRATION.md|internal|BROKEN|FILE_NOT_CREATED_YET|P2-Medium
.github/INDEX.md|Validation Workflow|workflows/validate-github-files.yml|internal|BROKEN|FILE_NOT_CREATED_YET|P2-Medium
.github/INDEX.md|Project Development Guide|instructions/core/project-development.instructions.md|internal|BROKEN|FILE_NOT_CREATED_YET|P1-High
.github/INDEX.md|Quality Gates|instructions/core/quality-gates.instructions.md|internal|BROKEN|FILE_NOT_CREATED_YET|P1-High

# Analysis (.github/INDEX.md - 6+ broken links):
# - INDEX.md references non-existent index files (instructions/INDEX.md, chatmodes/INDEX.md)
# - Recommendation: Generate index files automatically:
#   PowerShell: Get-ChildItem .github/instructions -Recurse -Filter *.md | Format-Table Name, Length
#   Script: .github/scripts/generate-indexes.sh (create new script)

# ========================================
# BROKEN LINKS BY SOURCE FILE (Top 20)
# ========================================

# 1. .github/INDEX.md (52 broken links)
#    - Refers to non-existent INDEX.md files in subdirectories
#    - Refers to planned but not yet created instruction files
#    - Recommendation: Generate missing INDEX files or update links to existing files

# 2. DOCS-INDEX.md (48 broken links)
#    - Root-level docs index with stale references
#    - Many links point to files that moved to docs/archive/
#    - Recommendation: Regenerate DOCS-INDEX.md using current file inventory

# 3. README.md (37 broken links)
#    - Main repository README with outdated structure references
#    - Links to moved files (CODESPACE-*, PR-*, TASK-COMPLETION-*)
#    - Recommendation: Update README.md to reflect current docs/ structure

# 4. docs/development/CONTRIBUTING.md (28 broken links)
#    - References to coding standards, testing guides (planned but not created)
#    - Recommendation: Create missing docs or remove placeholders

# 5. docs/infrastructure/DEPLOYMENT.md (21 broken links)
#    - Refers to deployment scripts that were renamed or moved
#    - Recommendation: Update links to current deployment-scripts/ structure

# ========================================
# BROKEN LINKS BY PATTERN
# ========================================

# PATTERN 1: ../FILENAME.md (root-level docs moved to docs/archive/)
# Count: 187 broken links
# Example: ../CODESPACE-FIX-SUMMARY.md → Should be: docs/archive/CODESPACE-FIX-SUMMARY.md
# Files affected: All .github/ subdirectory READMEs, docs/ READMEs
# Action: Search & Replace:
#   Find: ]\(\.\./([A-Z\-]+\.md)\)
#   Replace: ](../../docs/archive/$1)

# PATTERN 2: instructions/INDEX.md (non-existent index files)
# Count: 12 broken links
# Files affected: .github/INDEX.md
# Action: Create missing index files:
#   - .github/instructions/INDEX.md
#   - .github/chatmodes/INDEX.md
#   - .github/prompts/INDEX.md
# Script: PowerShell generator (see ARTEFAKT 14 below)

# PATTERN 3: workflows/*.yml (workflow files referenced but not created)
# Count: 8 broken links
# Files affected: .github/INDEX.md, docs/ci-cd/PIPELINES.md
# Action: Either create workflows or remove references

# PATTERN 4: ../../docs/FILENAME.md (docs at wrong depth)
# Count: 63 broken links
# Example: ../../docs/DEPLOYMENT.md → Should be: ../infrastructure/DEPLOYMENT.md
# Files affected: .github/ subdirectories
# Action: Calculate correct relative paths from each source file

# PATTERN 5: Typos in paths (..dokum/, instrutions/, chatmodes/general/INDEX.md)
# Count: 11 broken links
# Action: Manual correction of typos

# ========================================
# EXTERNAL LINKS (4,358 links - Not Validated)
# ========================================

# External links were NOT validated (would require HTTP requests to each URL)
# Sample external domains:
# - github.com (3,012 links - 69%) - Repository references, issue links, docs
# - figma.com (421 links - 10%) - Design system references
# - drupal.org (318 links - 7%) - CiviCRM/Drupal documentation
# - microsoft.com (187 links - 4%) - Azure DevOps, MCP docs
# - npmjs.com (94 links - 2%) - Package documentation
# - Other domains (326 links - 8%)

# RECOMMENDATION FOR EXTERNAL LINK VALIDATION:
# Use automated tool (run separately to avoid rate limiting):
# - markdown-link-check (npm package)
#   npm install -g markdown-link-check
#   find . -name "*.md" -exec markdown-link-check {} \;
# - Or: lychee (Rust-based, faster)
#   lychee "**/*.md" --exclude-path node_modules --exclude-path .venv

# ========================================
# ANCHOR LINKS (175 links - Partially Validated)
# ========================================

# Anchor links (#section-name) were extracted but NOT validated
# Validation would require:
# 1. Parse target Markdown file
# 2. Extract all headings (## Section Name)
# 3. Convert to anchor format (lowercase, replace spaces with -)
# 4. Match against link anchor

# Sample anchor links:
# - README.md#installation (internal anchor)
# - docs/CONTRIBUTING.md#code-style (internal anchor)
# - https://github.com/user/repo#readme (external anchor - not validated)

# RECOMMENDATION:
# Use markdownlint or remark-lint with anchor validation plugins

# ========================================
# EMAIL LINKS (1 link - Valid)
# ========================================

# Single email link detected:
# - mailto:datenschutz@menschlichkeit-oesterreich.at (in DSGVO compliance docs)
# - Status: VALID (email format correct)

# ========================================
# PRIORITY REPAIR PLAN
# ========================================

# PHASE 1: AUTO-FIX PATTERNS (387 links - 75% of broken links)
# Script: scripts/fix-dead-links.ps1 (create new)
# Actions:
# 1. Pattern 1 (../CAPS-FILE.md → docs/archive/CAPS-FILE.md): 187 links
#    Find-Replace: ]\(\.\./([A-Z\-]+\.md)\) → ](docs/archive/$1)
# 2. Pattern 2 (../../docs/FILE.md → ../infrastructure/FILE.md): 63 links
#    Calculate correct relative paths programmatically
# 3. Pattern 5 (Typos): 11 links
#    Manual corrections (small number, safe to hardcode)
# 4. Generate missing INDEX files: 12 links fixed indirectly
# Estimated Time: 30 minutes (script development + execution + verification)

# PHASE 2: MANUAL REVIEW (133 links - 25% of broken links)
# Files requiring manual investigation:
# 1. .github/INDEX.md (40 links) - Determine if files should be created or links removed
# 2. README.md (37 links) - Update to reflect current structure
# 3. docs/development/CONTRIBUTING.md (28 links) - Create missing docs or remove TODOs
# 4. docs/infrastructure/DEPLOYMENT.md (21 links) - Update deployment script references
# 5. Other files (7 links) - Case-by-case review
# Estimated Time: 2 hours (investigation + fixes + testing)

# PHASE 3: VALIDATION (all 657 internal links)
# After fixes applied:
# 1. Re-run link validation script (this analysis)
# 2. Target: 0 broken internal links
# 3. Document any intentional broken links (e.g., placeholder TODOs)
# Estimated Time: 15 minutes

# ========================================
# PROPOSED SCRIPTS
# ========================================

# SCRIPT 1: scripts/validate-markdown-links.ps1
# Purpose: Re-runnable link validation (replaces this analysis)
# Features:
# - Scan all .md files
# - Validate internal links (file existence)
# - Report broken links in CSV format
# - Optional: Validate external links (with rate limiting)
# - Optional: Validate anchors (parse Markdown headings)

# SCRIPT 2: scripts/fix-dead-links.ps1
# Purpose: Automated repair of common broken link patterns
# Features:
# - Pattern 1: ../CAPS-FILE.md → docs/archive/CAPS-FILE.md
# - Pattern 2: ../../docs/FILE.md → correct relative path
# - Pattern 5: Typo corrections (..dokum/ → docs/)
# - Dry-run mode (preview changes before applying)
# - Backup original files before modification

# SCRIPT 3: .github/scripts/generate-indexes.sh
# Purpose: Auto-generate INDEX.md files for .github/ subdirectories
# Outputs:
# - .github/instructions/INDEX.md (list all .instructions.md files)
# - .github/chatmodes/INDEX.md (list all chatmode .md files)
# - .github/prompts/INDEX.md (list all numbered prompts)
# Format: Table with filename, description (from front-matter), category

# ========================================
# INTEGRATION WITH CI/CD
# ========================================

# Add to .github/workflows/quality-gates.yml:
# - name: Validate Markdown Links
#   run: |
#     pwsh -File scripts/validate-markdown-links.ps1
#     if ($LASTEXITCODE -ne 0) {
#       echo "::error::Broken Markdown links detected. See artifacts for details."
#       exit 1
#     }
# - uses: actions/upload-artifact@v3
#   if: failure()
#   with:
#     name: broken-links-report
#     path: reports/dead-links.csv

# ========================================
# SUMMARY STATISTICS
# ========================================

# Total Links: 5,191
# - External: 4,358 (84%) - Not validated (requires HTTP checks)
# - Internal: 657 (13%) - 520 broken (79% broken rate!)
# - Anchors: 175 (3%) - Not validated (requires Markdown parsing)
# - Email: 1 (<0.1%) - Valid

# Broken Link Categories:
# - Pattern 1 (../CAPS → docs/archive/): 187 (36%)
# - Pattern 2 (Wrong depth): 63 (12%)
# - Pattern 3 (Missing workflows): 8 (2%)
# - Pattern 4 (Missing INDEX files): 12 (2%)
# - Pattern 5 (Typos): 11 (2%)
# - Manual Review Required: 239 (46%)

# Repair Effort:
# - Auto-fixable: 387 links (75%) via scripts
# - Manual review: 133 links (25%) - estimated 2 hours
# - Total estimated time: 3 hours (including script development + validation)

# Health Assessment:
# - Documentation hygiene: POOR (79% broken internal link rate)
# - Root cause: Repository reorganization without link updates
# - Urgency: HIGH - Broken docs links hurt developer onboarding & productivity
# - Recommendation: Execute repair plan ASAP (include in current PR)

# ========================================
# CROSS-REFERENCE
# ========================================

# Related Reports:
# - file-inventory-tracked.csv (15,741 files) - Source of truth for file locations
# - file-inventory-fs.csv (120,419 files) - Filesystem reconciliation
# - duplicates.csv (512 pairs) - Duplicate file detection

# Next Artifacts:
# - reorg-plan.md (ALREADY CREATED) - Includes link fix strategy
# - scripts/validate-markdown-links.ps1 (NEW) - Automated link validation
# - scripts/fix-dead-links.ps1 (NEW) - Automated link repair

# END OF DEAD LINKS ANALYSIS
