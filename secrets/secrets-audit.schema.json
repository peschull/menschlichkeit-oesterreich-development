{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.0",
  "project": {
    "name": "menschlichkeit-oesterreich-development",
    "owner": "peschull",
    "last_updated": "2025-10-18"
  },
  "categories": {
    "github_mcp": {
      "label": "GitHub & MCP Integration",
      "required": true,
      "secrets": [
        {
          "key": "GH_TOKEN",
          "pattern": "^ghp_[A-Za-z0-9]{36}$",
          "source": "GitHub Developer Settings",
          "purpose": "Zugriff auf Repos & CI",
          "scope": ["local", "ci"],
          "rotation_days": 90,
          "validation": {
            "required": true,
            "format": "GitHub Personal Access Token",
            "scopes": ["repo", "workflow", "read:packages"]
          },
          "notes": "repo, workflow, read:packages scopes erforderlich"
        }
      ]
    },
    "figma": {
      "label": "Figma Design System",
      "required": true,
      "secrets": [
        {
          "key": "FIGMA_API_TOKEN",
          "pattern": "^figd_[A-Za-z0-9_-]+$",
          "source": "Figma Account Settings",
          "purpose": "Zugriff auf Design-System",
          "scope": ["local"],
          "rotation_days": 180,
          "validation": {
            "required": true,
            "format": "Figma API Token"
          },
          "notes": "Nur Lesezugriff nötig"
        },
        {
          "key": "FIGMA_FILE_KEY",
          "pattern": "^[A-Za-z0-9]{22}$",
          "source": "Figma-Datei-URL",
          "purpose": "Identifikation des Projekts",
          "scope": ["local"],
          "rotation_days": 365,
          "validation": {
            "required": true,
            "format": "22-Zeichen Figma File Key"
          },
          "notes": "Aus Figma-URL extrahieren"
        },
        {
          "key": "FIGMA_MCP_SERVER_URL",
          "pattern": "^https?://[^\\s]+/mcp$",
          "source": "Manuell gesetzt",
          "purpose": "Lokaler MCP-Endpunkt",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "URL mit /mcp Pfad"
          },
          "notes": "Standard: http://127.0.0.1:3845/mcp"
        },
        {
          "key": "FIGMA_PROJECT_NAME",
          "pattern": "^.{3,}$",
          "source": "Manuell gesetzt",
          "purpose": "Projektname im Design-System",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "String"
          },
          "notes": "Dokumentationszweck"
        }
      ]
    },
    "postgresql": {
      "label": "PostgreSQL Datenbank",
      "required": true,
      "secrets": [
        {
          "key": "DATABASE_URL",
          "pattern": "^postgresql://[^@]+@[^/]+:[0-9]{4,5}/[^\\s]+$",
          "source": "Manuell konfiguriert",
          "purpose": "Hauptdatenbank-Verbindung",
          "scope": ["local", "ci", "production"],
          "rotation_days": 90,
          "validation": {
            "required": true,
            "format": "PostgreSQL Connection String"
          },
          "notes": "Enthält User, Pass, Host, Port, DB-Name",
          "security": [
            "Niemals produktive DB in development",
            "Passwort min. 16 Zeichen"
          ]
        },
        {
          "key": "DB_HOST",
          "pattern": "^[a-zA-Z0-9.-]+$",
          "source": "Manuell",
          "purpose": "Datenbank-Host",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Hostname oder IP"
          },
          "notes": "Standard: localhost"
        },
        {
          "key": "DB_NAME",
          "pattern": "^[a-zA-Z0-9_]+$",
          "source": "Manuell",
          "purpose": "Datenbankname",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Alphanumerisch + Underscore"
          },
          "notes": "Development DB-Name"
        },
        {
          "key": "DB_USER",
          "pattern": "^[a-zA-Z0-9_]+$",
          "source": "Manuell",
          "purpose": "Datenbanknutzer",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Alphanumerisch + Underscore"
          },
          "notes": "Separater User pro Umgebung"
        },
        {
          "key": "DB_PASS",
          "pattern": "^.{8,}$",
          "source": "Manuell",
          "purpose": "Passwort",
          "scope": ["local"],
          "rotation_days": 90,
          "validation": {
            "required": false,
            "format": "Min. 8 Zeichen"
          },
          "notes": "Nur für lokale Entwicklung",
          "security": [
            "Niemals produktive Passwörter in .env.example"
          ]
        },
        {
          "key": "DB_PORT",
          "pattern": "^[0-9]{4,5}$",
          "source": "Standardwert",
          "purpose": "Port",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Portnummer 1000-65535"
          },
          "notes": "Standard PostgreSQL: 5432"
        }
      ]
    },
    "fastapi_auth": {
      "label": "FastAPI & Authentication",
      "required": true,
      "secrets": [
        {
          "key": "APP_ENV",
          "pattern": "^(development|staging|production)$",
          "source": "Manuell",
          "purpose": "Umgebung",
          "scope": ["local", "ci", "production"],
          "rotation_days": null,
          "validation": {
            "required": true,
            "format": "Enum: development|staging|production"
          },
          "notes": "Steuert Debug-Level, CORS, Logging"
        },
        {
          "key": "APP_PORT",
          "pattern": "^[0-9]{4,5}$",
          "source": "Manuell",
          "purpose": "API-Port",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Portnummer"
          },
          "notes": "Standard: 8080"
        },
        {
          "key": "DEBUG",
          "pattern": "^(true|false|1|0)$",
          "source": "Manuell",
          "purpose": "Debug-Modus",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Boolean"
          },
          "notes": "Production: false",
          "security": [
            "NIEMALS true in Produktion"
          ]
        },
        {
          "key": "JWT_SECRET",
          "pattern": "^.{32,}$",
          "source": "openssl rand -base64 32",
          "purpose": "Token-Signierung",
          "scope": ["local", "ci", "production"],
          "rotation_days": 180,
          "validation": {
            "required": true,
            "format": "Min. 32 Zeichen, Base64"
          },
          "notes": "Separates Secret pro Umgebung",
          "generation": "openssl rand -base64 32",
          "security": [
            "Niemals zwischen Umgebungen teilen",
            "Bei Kompromittierung sofort rotieren"
          ]
        },
        {
          "key": "FRONTEND_ORIGINS",
          "pattern": "^https?://[^\\s]+(,https?://[^\\s]+)*$",
          "source": "Manuell",
          "purpose": "CORS-Konfiguration",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Komma-separierte URLs"
          },
          "notes": "Mehrere Origins erlaubt"
        }
      ]
    },
    "smtp_imap": {
      "label": "E-Mail (SMTP/IMAP)",
      "required": false,
      "secrets": [
        {
          "key": "ADMIN_EMAIL",
          "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
          "source": "Manuell",
          "purpose": "Admin-Konto",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "E-Mail-Adresse"
          },
          "notes": "System-Benachrichtigungen"
        },
        {
          "key": "ADMIN_EMAIL_PASS",
          "pattern": "^.{8,}$",
          "source": "Mailserver",
          "purpose": "Passwort",
          "scope": ["local", "production"],
          "rotation_days": 90,
          "validation": {
            "required": false,
            "format": "Min. 8 Zeichen"
          },
          "notes": "App-Passwort bevorzugt",
          "security": [
            "Niemals Haupt-Passwort nutzen"
          ]
        },
        {
          "key": "SMTP_HOST",
          "pattern": "^[a-zA-Z0-9.-]+$",
          "source": "Mailserver-Konfiguration",
          "purpose": "Mailversand",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Hostname"
          },
          "notes": "TLS empfohlen"
        },
        {
          "key": "SMTP_PORT",
          "pattern": "^(25|465|587)$",
          "source": "Standardwert",
          "purpose": "Port",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "25 (unencrypted), 465 (SSL), 587 (TLS)"
          },
          "notes": "Empfohlen: 587 (STARTTLS)"
        },
        {
          "key": "SMTP_USER",
          "pattern": "^.+$",
          "source": "Mailserver",
          "purpose": "Authentifizierung",
          "scope": ["local", "production"],
          "rotation_days": 90,
          "validation": {
            "required": false,
            "format": "String"
          },
          "notes": "Oft identisch mit E-Mail"
        },
        {
          "key": "SMTP_PASS",
          "pattern": "^.{8,}$",
          "source": "Mailserver",
          "purpose": "Passwort",
          "scope": ["local", "production"],
          "rotation_days": 90,
          "validation": {
            "required": false,
            "format": "Min. 8 Zeichen"
          },
          "notes": "App-Passwort nutzen"
        },
        {
          "key": "MAIL_FROM_NAME",
          "pattern": "^.{3,}$",
          "source": "Manuell",
          "purpose": "Absendername",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "String"
          },
          "notes": "Angezeigter Absendername"
        }
      ]
    },
    "stripe": {
      "label": "Stripe Payment Gateway",
      "required": false,
      "secrets": [
        {
          "key": "STRIPE_API_KEY",
          "pattern": "^sk_(test|live)_[A-Za-z0-9]{99}$",
          "source": "Stripe Dashboard",
          "purpose": "Zahlungen",
          "scope": ["local", "production"],
          "rotation_days": 180,
          "validation": {
            "required": false,
            "format": "sk_test_... oder sk_live_..."
          },
          "notes": "Test-Key für development",
          "security": [
            "sk_live_ NIEMALS in development"
          ]
        },
        {
          "key": "STRIPE_WEBHOOK_SECRET",
          "pattern": "^whsec_[A-Za-z0-9]{32,}$",
          "source": "Stripe Dashboard",
          "purpose": "Webhook-Verifizierung",
          "scope": ["local", "production"],
          "rotation_days": 180,
          "validation": {
            "required": false,
            "format": "whsec_..."
          },
          "notes": "Separates Secret pro Umgebung"
        },
        {
          "key": "STRIPE_PUBLISHABLE_KEY",
          "pattern": "^pk_(test|live)_[A-Za-z0-9]{99}$",
          "source": "Stripe Dashboard",
          "purpose": "Frontend-Zahlungen",
          "scope": ["local", "production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "pk_test_... oder pk_live_..."
          },
          "notes": "Öffentlich sichtbar (kein Secret)"
        }
      ]
    },
    "monitoring": {
      "label": "Monitoring & Analytics",
      "required": false,
      "secrets": [
        {
          "key": "SENTRY_DSN",
          "pattern": "^https://[a-f0-9]+@[a-z0-9]+\\.ingest\\.sentry\\.io/[0-9]+$",
          "source": "Sentry Dashboard",
          "purpose": "Fehler-Tracking",
          "scope": ["local", "production"],
          "rotation_days": 365,
          "validation": {
            "required": false,
            "format": "Sentry DSN URL"
          },
          "notes": "Leer lassen, wenn inaktiv"
        },
        {
          "key": "CLARITY_API_KEY",
          "pattern": "^[a-z0-9]{10,}$",
          "source": "Microsoft Clarity",
          "purpose": "Nutzerverhalten-Tracking",
          "scope": ["production"],
          "rotation_days": 365,
          "validation": {
            "required": false,
            "format": "Alphanumerisch"
          },
          "notes": "Optional, nur Produktion"
        },
        {
          "key": "PLAUSIBLE_DOMAIN",
          "pattern": "^[a-z0-9.-]+$",
          "source": "Manuell",
          "purpose": "Analytics-Domain",
          "scope": ["production"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Domain-Name"
          },
          "notes": "Für Plausible.io"
        }
      ]
    },
    "gpg": {
      "label": "GPG & Verschlüsselung",
      "required": false,
      "secrets": [
        {
          "key": "GPG_Key",
          "pattern": "^-----BEGIN PGP PRIVATE KEY BLOCK-----.*-----END PGP PRIVATE KEY BLOCK-----$",
          "source": "gpg --export-secret-keys --armor",
          "purpose": "Verschlüsselung",
          "scope": ["local"],
          "rotation_days": 365,
          "validation": {
            "required": false,
            "format": "ASCII-armored PGP Key"
          },
          "notes": "ASCII-armored, nicht produktiv",
          "generation": "gpg --full-generate-key && gpg --export-secret-keys --armor KEY_ID",
          "security": [
            "NIEMALS in .env.example",
            "Nur via dotenv-vault oder GitHub Secrets"
          ]
        }
      ]
    },
    "legacy_laravel": {
      "label": "Legacy Laravel Komponenten",
      "required": false,
      "secrets": [
        {
          "key": "LARAVEL_DB_NAME",
          "pattern": "^[a-zA-Z0-9_]+$",
          "source": "Manuell",
          "purpose": "Datenbank",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Alphanumerisch"
          },
          "notes": "Nur bei Laravel-Komponenten"
        },
        {
          "key": "LARAVEL_DB_USER",
          "pattern": "^[a-zA-Z0-9_]+$",
          "source": "Manuell",
          "purpose": "Authentifizierung",
          "scope": ["local"],
          "rotation_days": null,
          "validation": {
            "required": false,
            "format": "Alphanumerisch"
          },
          "notes": "Separater User"
        },
        {
          "key": "LARAVEL_DB_PASS",
          "pattern": "^.{8,}$",
          "source": "Manuell",
          "purpose": "Passwort",
          "scope": ["local"],
          "rotation_days": 90,
          "validation": {
            "required": false,
            "format": "Min. 8 Zeichen"
          },
          "notes": "Nur lokale Entwicklung"
        }
      ]
    }
  },
  "security_rules": [
    {
      "rule": "no_prod_keys_in_dev",
      "description": "Keine produktiven Keys in development",
      "validation": "KEY must not contain _PROD_ or _LIVE_ in development"
    },
    {
      "rule": "no_prod_db_in_dev",
      "description": "Keine produktive Datenbank in development",
      "validation": "DATABASE_URL must not point to production host"
    },
    {
      "rule": "min_secret_length",
      "description": "Secrets müssen Mindestlänge haben",
      "validation": "JWT_SECRET, DB_PASS, API keys: min 32 chars"
    },
    {
      "rule": "rotation_schedule",
      "description": "Regelmäßige Rotation",
      "validation": "High-sensitivity secrets: 90 days, Medium: 180 days, Low: 365 days"
    }
  ],
  "placeholder_patterns": [
    "CHANGE",
    "XXX",
    "YOUR_",
    "TODO",
    "GENERATE",
    "EXAMPLE",
    "PLACEHOLDER"
  ],
  "compliance": {
    "dsgvo": {
      "article_32": "Technische und organisatorische Maßnahmen",
      "measures": [
        "Verschlüsselung (dotenv-vault, GitHub Secrets)",
        "Zugriffskontrolle (rollenbasiert)",
        "Audit-Trail (dieses Dokument)",
        "Rotation (siehe rotation_days pro Secret)"
      ]
    }
  }
}
